# 上位机状态机

## 1.雷达建图模块

map_simulator

### 接口：扫出的3d .pcd地图，确定坐标原点以及可以返回定位数据（不一定要用，可以辅助码盘和激光定位）



## 轨迹生成模块：

am_traj

rviz_plugins

### 接口：用鼠标定点的数量或者手动输入坐标，在config的yaml文件对外留出设置



## 手柄模块：

### 接口：按键配合生成点＋给下位机雷达数据辅助定位＋

### 作用：方便对上位机进行调试，或者可能配合下位机状态机一起使用（先用有线试试，无线以后再说）



## 通信模块：

mavros

mavlink-gbp-release

### 作用：发布轨迹对应速度消息，对mavros的自定义消息为速度＋．．．．．．（待补全）


#　传感器模块:

雷达点云经过降采样输出(很重要，否则内存会炸)

对栅格的判别通过box方式返回最高的几个点(尤其注意两个环在托盘上交叉重合的状况)

视觉模块要求太高，除非简单的空还有自己射中的情况，对面射中的柱子还是直接用眼睛看(抢占优先级策略)

#　最后融合:

自主决策导航的位置，影响因素包括传感器返回的柱子最上面的环的颜色，当前位置，到达每个发射区域的时间，每个位置发射的命中率，以及调整发射机构和发射需要的时间，自主得到时间以及得分的最优解．(等待传感器模块能准确完成后再实现)

#　第二种排除法决策
时刻检测柱子上套环决策，最原始状态是啥都没有，如果自己没射，多了一个环，就是对面射的